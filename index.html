<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-T9QNZ3LHS9"></script>
    <script>window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-T9QNZ3LHS9');</script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>신혼희망타운 모기지 계산기 | 수익공유형 정산표 & 월 납입금</title>
    <meta name="description" content="신혼희망타운 수익공유형 모기지 전용 계산기입니다. 일반 주담대와 이자 및 최종 수익을 비교하고, LH 환수금을 자동으로 계산해보세요.">
    <meta name="keywords" content="신혼희망타운, 수익공유형모기지, 신희타계산기, 모기지정산표">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="style.css">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7715950782331375" crossorigin="anonymous"></script>
</head>
<body>

<nav class="navbar navbar-expand navbar-dark navbar-custom fixed-top">
    <div class="container-fluid justify-content-center">
        <ul class="navbar-nav flex-row">
            <li class="nav-item mx-3"><a class="nav-link active" href="index.html">계산기</a></li>
            <li class="nav-item mx-3"><a class="nav-link" href="table.html">정산표</a></li>
            <li class="nav-item mx-3"><a class="nav-link" href="guide.html">가이드</a></li>
            <li class="nav-item mx-3"><a class="nav-link" href="faq.html">FAQ</a></li>
        </ul>
    </div>
</nav>

<header class="main-header">
    <h1>신혼희망타운 모기지 계산기</h1>
    <p>수익공유 정산금과 일반 대출 이자 비교 분석</p>
</header>

<div class="page-container calc-container">
    <div class="text-center mb-3">
        <ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-7715950782331375" data-ad-slot="2160042283" data-ad-format="auto" data-full-width-responsive="true"></ins>
        <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
    </div>

    <form id="calcForm" onsubmit="return false;">
        <div class="step-section">
            <span class="step-badge">STEP 1</span>
            <div class="mb-3">
                <label class="form-label" for="purchasePrice">분양가 (입주금)</label>
                <div class="input-group">
                    <input type="text" class="form-control text-end fw-bold" id="purchasePrice" placeholder="0" onkeyup="inputNumberFormat(this)" required inputmode="numeric">
                    <span class="input-group-text">만원</span>
                </div>
                <div id="text-purchasePrice" class="money-ko"></div>
            </div>
            <div class="row">
                <div class="col-6">
                    <label class="form-label" for="kids">자녀 수</label>
                    <select class="form-select" id="kids">
                        <option value="0">0명</option>
                        <option value="1">1명</option>
                        <option value="2">2명 이상</option>
                    </select>
                </div>
                <div class="col-6">
                    <label class="form-label" for="startDate">입주(대출) 시기</label>
                    <input type="month" class="form-control" id="startDate" required>
                </div>
            </div>
        </div>

        <div class="step-section">
            <span class="step-badge">STEP 2</span>
            <label class="form-label" for="loanAmount">대출 금액 (LTV 선택)</label>
            <div class="input-group mb-2">
                <input type="text" class="form-control text-end fw-bold" id="loanAmount" placeholder="금액 자동 입력" onkeyup="inputNumberFormat(this)" required inputmode="numeric">
                <span class="input-group-text">만원</span>
            </div>
            <div id="text-loanAmount" class="money-ko mb-2"></div>
            <div class="btn-group w-100 mb-3" role="group">
                <button type="button" class="btn btn-outline-custom btn-sm" onclick="setLTV(70)">70%</button>
                <button type="button" class="btn btn-outline-custom btn-sm" onclick="setLTV(60)">60%</button>
                <button type="button" class="btn btn-outline-custom btn-sm" onclick="setLTV(50)">50%</button>
                <button type="button" class="btn btn-outline-custom btn-sm" onclick="setLTV(40)">40%</button>
                <button type="button" class="btn btn-outline-custom btn-sm" onclick="setLTV(30)">30%</button>
            </div>
            <div class="text-end mb-3">
                <span class="badge bg-light text-dark border" id="ltvDisplay">LTV: - %</span>
                <span class="badge bg-danger" id="limitWarning" style="display:none;">한도 4억 초과</span>
            </div>
            <div class="row">
                <div class="col-6">
                    <label class="form-label" for="hopeRate">대출 금리</label>
                    <div class="input-group input-group-sm mb-1">
                        <input type="number" class="form-control" id="hopeRate" value="1.3" step="0.1">
                        <span class="input-group-text">%</span>
                    </div>
                    <div class="btn-group w-100 btn-group-sm">
                        <button type="button" class="btn btn-outline-secondary" onclick="setRate(1.3)">1.3%</button>
                        <button type="button" class="btn btn-outline-secondary" onclick="setRate(1.6)">1.6%</button>
                    </div>
                </div>
                <div class="col-6">
                    <label class="form-label" for="termOptions">대출 만기</label>
                    <select class="form-select" id="termOptions">
                        <option value="30">30년 (1년거치)</option>
                        <option value="20">20년 (1년거치)</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="step-section border-primary border-opacity-25" style="background-color: #f8fffc;">
            <span class="step-badge bg-primary">STEP 3</span>
            <div class="mb-3">
                <label class="form-label" for="endDate">예상 매도 시기</label>
                <input type="month" class="form-control" id="endDate" onchange="calcDurationAndCAGR()" required>
                <div class="text-end mt-1">
                    <span class="badge bg-secondary" id="durationBadge">기간 미입력</span>
                </div>
            </div>
            <div class="mb-3">
                <label class="form-label" for="sellPrice">예상 매도 가격</label>
                <div class="input-group">
                    <input type="text" class="form-control text-end fw-bold" id="sellPrice" placeholder="0" onkeyup="updateCAGR(this)" required inputmode="numeric">
                    <span class="input-group-text">만원</span>
                </div>
                <div id="text-sellPrice" class="money-ko"></div>
                <span id="cagrDisplay" class="cagr-badge"></span>
            </div>
        </div>

        <div class="mb-4 px-2">
            <label class="form-label text-muted small" for="normalRate"><i class="bi bi-bank"></i> 비교용 일반 주담대 금리</label>
            <div class="input-group input-group-sm">
                <input type="number" class="form-control" id="normalRate" value="4.5" step="0.1">
                <span class="input-group-text">%</span>
            </div>
        </div>

        <button type="button" class="btn btn-success w-100 py-3 fw-bold shadow-sm fs-5" style="background-color:var(--primary-color); border:none;" onclick="calculate()">
            결과 분석하기
        </button>
    </form>

    <div id="resultBox" class="result-box mt-4" style="display:none;">
        <h5 class="fw-bold text-center mb-3">📊 분석 결과</h5>
        <div id="verdictBox" class="alert text-center fw-bold mb-3 small"></div>
        <table class="table table-bordered bg-white small align-middle mb-3">
            <thead class="table-light text-center">
                <tr><th width="30%">항목</th><th width="35%">신희타</th><th width="35%">일반대출</th></tr>
            </thead>
            <tbody>
                <tr><td class="bg-light text-center">시세차익</td><td colspan="2" class="text-center fw-bold text-primary">+<span id="resGain">0</span>만</td></tr>
                <tr><td class="bg-light text-center">총 이자</td><td class="text-end text-danger">-<span id="resHopeInt">0</span>만</td><td class="text-end text-danger">-<span id="resNormInt">0</span>만</td></tr>
                <tr><td class="bg-light text-center fw-bold text-danger">LH 환수금</td><td class="text-end text-danger fw-bold bg-warning bg-opacity-10">-<span id="resShare">0</span>만<br><span style="font-size:0.7em;">(환수율 <span id="resShareRate">0</span>%)</span></td><td class="text-center text-muted">-</td></tr>
                <tr class="table-group-divider"><td class="bg-dark text-white text-center">최종수익</td><td class="text-end fw-bold text-success"><span id="resHopeProfit">0</span>만</td><td class="text-end fw-bold text-secondary"><span id="resNormProfit">0</span>만</td></tr>
            </tbody>
        </table>
        <div class="card border-0 bg-light mb-3">
            <div class="card-body p-3">
                <h6 class="card-title fw-bold small mb-3 text-center"><i class="bi bi-wallet2"></i> 월 예상 납부액 비교</h6>
                <div class="row g-2">
                    <div class="col-6">
                        <div class="p-2 bg-white rounded border text-center h-100">
                            <div class="badge bg-success mb-2">신혼희망타운</div>
                            <div class="small text-muted mb-1">초기 1년 (이자만)</div><div class="fw-bold mb-2"><span id="pmtInterestOnly">0</span>원</div>
                            <div class="small text-muted mb-1">2년차~ (원리금)</div><div class="fw-bold text-success fs-5"><span id="pmtFull">0</span>원</div>
                        </div>
                    </div>
                    <div class="col-6">
                        <div class="p-2 bg-white rounded border text-center h-100">
                            <div class="badge bg-secondary mb-2">일반 주담대</div>
                            <div class="small text-muted mb-1">매월 (원리금)</div><div class="fw-bold text-secondary fs-5 mt-4"><span id="normPmtFull">0</span>원</div>
                            <div class="mt-2 text-danger" style="font-size: 0.7rem;">(월 +<span id="diffPmt">0</span>원 더 냄)</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4 text-center">
            <a href="table.html" class="btn btn-outline-dark btn-sm me-2">📜 정산표 전체보기</a>
            <a href="guide.html" class="btn btn-outline-primary btn-sm">📖 상세 가이드</a>
        </div>
    </div>
</div>

<footer>
    <div class="container text-center">
        <p class="small text-muted">© 2024 Shinheeta Calculator. All rights reserved.</p>
        <p class="small text-muted"><a href="mailto:shinta.calc@gmail.com">Contact</a> | <a href="guide.html">Terms</a></p>
    </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script src="script.js"></script>
</body>
</html>
